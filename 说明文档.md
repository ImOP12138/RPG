# 原项目的回忆





# 参考资料

​		所有人物、怪的状态机（就是那些动作之间的切换，比如静止、走动、跳跃、攻击、冲刺、二段跳，怪物的来回寻路，追击敌人，攻击）全部都是参考的这个视频教程，甚至文件名

【【Unity 2D游戏开发教程】第42课 如何在Unity中实现敌人跟随追击玩家功能 Enemy Follow Player】 https://www.bilibili.com/video/BV1w54y1S75R/?share_source=copy_web&vd_source=60a924f18f89cd75f22d27a96c118a57

# 关卡

关于关卡就是自己设想的了，简要概述一下



关卡的亮点在于我的人物进入到某片区域后，能够走上墙，这个是旋转地图实现的，其实我想做成下面这种效果。

【【卡纳西】旋转城堡】 https://www.bilibili.com/video/BV1Ws411U7dK/?share_source=copy_web&vd_source=60a924f18f89cd75f22d27a96c118a57

但是我对引擎的不同坐标系下的旋转功能实在是不熟悉，最后是把整个地图基于人物坐标在进行旋转，其实这样也没问题，但这样导致了一个bug，就是我的出生点坐标好像并没有跟着地图进行旋转，导致我的角色噶了之重生是在地图外边，反正就是一个错误的地点（旋转之前的位置）

其次因为我的旋转时机判断是基于人物的前边是否走到边缘或者墙壁，走到了边缘或者墙壁就进行对应的旋转，然后这个旋转其实也没做好。就是这个旋转的原点，我好像是直接拿的人物的某个点作为旋转轴在旋转，这就导致旋转之后的位置和预期有点出入，而且人物在旋转过程中因为地面消失了会受重力往下落，经常导致人物在旋转之后就穿模掉出地图外了。所以我加了些补丁，旋转之后地图往下走了一点点，这样就能保证旋转之后地面在人物脚下不至于掉出去，但实际上这个旋转过程是很不规范的，很容易出问题，比如动作快了很容易引发神秘bug比如穿模或者场景的怪物或者道具位置不对。



这也是为什么我说建议重做地图。

# 人物、怪物

关于人物：

可以在动画的界面看到有多少种状态，然后不同状态的切换都是用脚本实现的，动画也是脚本来控制播放的。比如跳跃和走动，静止、攻击等等。

主角目前有两种技能，都写在了脚本里，但是一开始是没有解锁的，得走到两个指定检查点才能解锁。比如冲刺和二段跳，好像还有个超级垂直飞来着，

还实现了主角和怪物的攻击交互，可以点击左键触发攻击，可以对怪物造成伤害。



怪物：

拿长矛的：

能来回寻路，碰到边缘或者墙就左右翻转动画，然后换个方向走。

当人进入追击范围内就加速追击

进入攻击范围就攻击。

蝙蝠：
也是有追击范围和攻击，攻击好像是碰到人就算攻击。



人和怪物都做了血条。





反正你要重做地图的话建议把人物检测地图边缘或者墙体时，就触发地图翻转的功能给去掉。这个我觉得是比较难搞的一个东西。



# 建议

当然换个地图的话事儿就会少很多，把人、怪物挪过去就行，还有检查点也能用

场景就像是虚拟环境一样，一般一个关卡一个场景，主菜单和结束界面也是单独的场景，然后场景之间可以通过脚本进行切换。

如果要用的东西比较多的话，也可以直接就新建个场景就行了，这样就可以随时查看原场景那些物体是咋用的，然后也可以复制到新场景里，就比较方便。

但是如果你自己搭了地图就看看咋搞比较方便哇，我没试过把别的项目的场景直接复制过来能不能运行。
